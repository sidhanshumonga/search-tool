(this["webpackJsonpsearch-tool"]=this["webpackJsonpsearch-tool"]||[]).push([[0],{43:function(e,t,a){e.exports=a(78)},48:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},54:function(e,t,a){e.exports=a.p+"static/media/loading.4c140210.gif"},74:function(e,t,a){},78:function(e,t,a){"use strict";a.r(t);var o=a(0),n=a.n(o),s=a(9),r=a.n(s),l=(a(48),a(40)),c=a(21),i=a(10),h=a(11),u=a(15),p=a(12),d=a(14),m=a(80),g=a(39),f=a(82),v=(a(49),a(50),a(81)),E=(a(51),function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return n.a.createElement(v.a,Object.assign({},this.props,{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0}),n.a.createElement(v.a.Header,{closeButton:!0},n.a.createElement(v.a.Title,{id:"contained-modal-title-vcenter"},this.props.photo?this.props.photo.title:null)),n.a.createElement(v.a.Body,{className:"text-center"},this.props.photo?n.a.createElement("img",{src:"https://farm"+this.props.photo.farm+".staticflickr.com/"+this.props.photo.server+"/"+this.props.photo.id+"_"+this.props.photo.secret+"_z.jpg",alt:this.props.photo.title.split(" ")[0]}):null))}}]),t}(o.Component)),b=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(p.a)(t).call(this))).setModalShow=function(t,a){e.setState({modalShow:t,selected:a})},e.state={modalShow:!1,setModalShow:!1,selected:null},e}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"PhotosGrid"},0===this.props.photos.length?n.a.createElement("h2",null,"No photo found"):this.props.photos.map((function(t){return n.a.createElement("img",{key:t.id,className:"m-2 photos",src:"https://farm"+t.farm+".staticflickr.com/"+t.server+"/"+t.id+"_"+t.secret+"_z.jpg",alt:t.title.split(" ")[0],width:"220px",height:"220px",onClick:function(){return e.setModalShow(!0,t)}})})),this.props.loading&&this.props.page>1?n.a.createElement("img",{src:a(54),className:"inline",width:"420px",height:"220px"}):null,n.a.createElement(E,{show:this.state.modalShow,photo:this.state.selected,onHide:function(){return e.setModalShow(!1)}}))}}]),t}(o.Component),w=a(37),S=a.n(w),j=a(38),y=a.n(j),O=(a(74),function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"dot dot-1"}),n.a.createElement("div",{className:"dot dot-2"}),n.a.createElement("div",{className:"dot dot-3"}),n.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1"},n.a.createElement("defs",null,n.a.createElement("filter",{id:"goo"},n.a.createElement("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"10",result:"blur"}),n.a.createElement("feColorMatrix",{in:"blur",mode:"matrix",values:"1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 21 -7"})))))}}]),t}(n.a.Component)),N={value:"",photos:[],loading:!1,apiPageCount:1,totalPages:1,scrolled:!1},C=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(p.a)(t).call(this))).fetchPhotos=y.a.debounce((function(t){S.a.get("https://www.flickr.com/services/rest/?method=flickr.photos.search&api_key=3b8da0e5c9ae44b2d9c8f009a21f8929&text="+e.state.value+"&format=json&safe_search=3&nojsoncallback=1&page="+e.state.apiPageCount).then((function(a){a.data.photos&&(e.setState({photos:t?Object(c.a)(a.data.photos.photo):[].concat(Object(c.a)(e.state.photos),Object(c.a)(a.data.photos.photo)),loading:!1,totalPages:a.data.photos.pages,scrolled:!1}),t&&e.state.value.length>2&&(e.saveToStorage(),e.recover()))}))}),1e3),e.handleChange=function(t){e.setState({value:t.target.value}),t.target.value?(e.setState({loading:!0}),e.fetchPhotos(!0)):e.setState(N)},e.updateSearch=function(t){e.setState({value:t,loading:!0}),e.fetchPhotos(!0)},e._handleKeyDown=function(t){"Enter"===t.key&&(t.preventDefault(),e.handleChange(t))},e.isInViewport=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=document.getElementsByClassName("photos"),a=t[t.length-1];if(!a)return!1;var o=a.getBoundingClientRect().top;return o+e>=0&&o-e<=window.innerHeight},e.handleScroll=function(t){if(e.isInViewport()&&e.state.apiPageCount<=e.state.totalPages&&!e.state.scrolled)return e.setState({apiPageCount:e.state.apiPageCount+1,loading:!0,scrolled:!0}),void e.fetchPhotos()},e.recover=function(){var t=JSON.parse(localStorage.getItem("history"));t&&e.setState({history:t.length>5?t.reverse().splice(0,5):t.reverse()})},e.saveToStorage=function(){var t=e.state.history?Object(c.a)(e.state.history):[];t.includes(e.state.value)||t.push(e.state.value),localStorage.setItem("history",JSON.stringify(t))},e.clearStroage=function(){localStorage.clear(),e.setState({history:[],value:"",photos:[]})},e.componentDidMount=function(){window.addEventListener("scroll",e.handleScroll),e.recover()},e.componentWillUnmount=function(){window.removeEventListener("scroll",e.handleScroll)},e.state=Object(l.a)({},N,{history:[]}),e}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"App"},n.a.createElement("header",{className:"App-header"},n.a.createElement(m.a,{className:"search-row"},n.a.createElement(g.a,null,n.a.createElement("h3",{className:"my-3"},"Search Photos"),n.a.createElement(f.a,null,n.a.createElement(f.a.Control,{className:"search-input",placeholder:"Search images...",value:this.state.value,onChange:this.handleChange,onKeyDown:this._handleKeyDown})),this.state.history.length>0?n.a.createElement("div",{className:"pt-2"},n.a.createElement("h6",{className:"p-head"},"Previous Search: "),this.state.history.map((function(t){return n.a.createElement("p",{key:t,className:"p-tags mx-1",onClick:function(){return e.updateSearch(t)}},t)})),n.a.createElement("i",{className:"material-icons clear-tags m-2",onClick:function(){return e.clearStroage()}},"close")):null))),n.a.createElement("div",{className:"App-body mt-3"},n.a.createElement(b,{photos:this.state.photos,loading:this.state.loading,page:this.state.apiPageCount}),this.state.loading?n.a.createElement(O,{className:"loader-div"}):null))}}]),t}(n.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(77);r.a.render(n.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[43,1,2]]]);
//# sourceMappingURL=main.c91bb2c6.chunk.js.map